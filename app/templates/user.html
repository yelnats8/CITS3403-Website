{% extends "base.html" %} 

{% block content %} 
    <div class="user-profile">
        <img class="avatar" src="{{ url_for('static', filename= current_user.avatar_path) }}" width ="256" height ="256">
        <div class="user-info">
            <h1>User: {{ user.username }}</h1>
            {% if user.about_me %}
                <p>{{ user.about_me }}</p>
            {% endif %}
            {% if user.last_seen %}
                <p>Last seen on: {{ user.last_seen_formatted }}</p>
            {% endif %}
            {% if user == current_user %}
                <p><a href="{{ url_for('edit_profile') }}">Edit your Profile</a></p>
            {% endif %}
        </div>
    </div>
    <hr>
    <div class="posts">
        {% for post in posts %}
            <div class="post">
                <td><img class="avatar" src="{{ url_for('static', filename= current_user.avatar_path) }}" width = "40" height = "40"></td>
                <td>{{ post.author.username }} says:  {{ post.body }} <br> 
                    <small> Posted on {{ post.timestamp.strftime('%Y-%m-%d %H:%M:%S') }} </small>
                </td>
                {% if post.author == current_user %}
                    <form action="{{ url_for('delete_post', username=user.username, post_id=post.id) }}" method="POST">
                        <button type="submit" class="delete-button">Delete</button>
                    </form>
                {% endif %}
            </div>
        {% endfor %}
    </div>

    <div class="add-post">
        <form method="POST">
            <input type="text" name="post_body">
            <button type="submit">Add Post</button>
        </form>
    </div>
{% endblock %}
